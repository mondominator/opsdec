services:
  opsdec:
    image: ghcr.io/mondominator/opsdec:latest
    # Uncomment below to build from source instead
    # build: .
    container_name: opsdec
    restart: unless-stopped
    ports:
      - "3001:3001"
    volumes:
      # Persist database
      - ./data:/app/data
    environment:
      # Server Configuration
      - PORT=3001
      - NODE_ENV=production

      # JWT Authentication Secret (IMPORTANT: Change this to a secure random string!)
      # Generate one with: openssl rand -hex 32
      - JWT_SECRET=change-this-to-a-secure-random-string

      # Timezone Configuration
      # Set your timezone for correct peak hour statistics
      # Examples: America/New_York, Europe/London, Asia/Tokyo
      # Find your timezone: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
      - TZ=UTC

      # User/Group Configuration (for Unraid compatibility)
      # Set to your user's UID/GID if you have permission issues
      # Default: 1000:1000 (standard Docker node user)
      # To find your UID: run 'id -u' on your Unraid terminal
      # To find your GID: run 'id -g' on your Unraid terminal
      - PUID=1000
      - PGID=1000

      # Emby Configuration
      - EMBY_URL=http://your-emby-server:8096
      - EMBY_API_KEY=your_emby_api_key_here

      # Plex Configuration
      - PLEX_URL=http://your-plex-server:32400
      - PLEX_TOKEN=your_plex_token_here

      # Audiobookshelf Configuration (Optional)
      - AUDIOBOOKSHELF_URL=http://your-audiobookshelf-server:13378
      - AUDIOBOOKSHELF_API_KEY=your_audiobookshelf_token_here

      # Sappho Configuration (Optional)
      - SAPPHO_URL=http://your-sappho-server:3000
      - SAPPHO_API_KEY=your_sappho_api_key_here

      # Polling Configuration
      - POLL_INTERVAL=30
    networks:
      - opsdec

networks:
  opsdec:
    name: opsdec
